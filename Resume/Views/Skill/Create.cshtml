@model Resume.Models.Skill

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()

    <div class="col-lg-12">
        <div class="form-horizontal">
            <hr />
            @Html.ValidationSummary(true)
            <fieldset>
                <legend>Create Skill</legend>
                <div class="form-group">
                    <div class="col-md-4">
                        @Html.EditorFor(model => model.Name)
                    </div>
                    <div class="col-md-offset-1 col-md-1">
                        @Html.EditorFor(model => model.Level)
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-10">
                        <form id="mediumIconForm" enctype="multipart/form-data">
                            <div class="input-group">
                                <img id="mediumIconImg" />
                                @Html.HiddenFor(model => model.MediumIconId, new { id = "mediumIconId" })
                                <input name="mediumicon" type="file" id="uploadbtn" class="btn-default btn-file" />
                                <input type="button" value="Upload" onclick="upload()" class="btn btn-default" />
                            </div>
                        </form>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Description, "Multiline")
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Create" class="btn btn-default" />
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
}

<div>

    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        function upload() {
            var file = $('#uploadbtn')[0].files[0];
            var formData = new FormData();
            formData.append('file', file);
            $.ajax({
                url: '../api/UserFile',
                type: 'POST',
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                success: function (fileInfo) {
                    $('#mediumIconImg').attr("src", "/api/UserFile/" + fileInfo.UserFileId);
                    $('#mediumIconId').val(fileInfo.UserFileId);
                }
            });
        }
    </script>
}
